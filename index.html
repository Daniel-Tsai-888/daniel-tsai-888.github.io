<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>塔羅牌抽牌程式</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 20px;
    }

    h1 {
      margin-bottom: 10px;
    }

    button {
      margin-right: 10px;
      padding: 6px 12px;
      cursor: pointer;
    }

    .result {
      margin-top: 20px;
    }

    .card {
      margin-bottom: 5px;
    }
  </style>
</head>
<body>
  <h1>塔羅牌抽牌程式（78張）</h1>
  <button id="drawFiveBtn">抽五張</button>
  <button id="drawTwelveBtn">抽十二張</button>

  <div class="result" id="resultArea"></div>

  <script>
    // --- Step 1: 定義大阿爾克那 (22 張) ---
    const majorArcana = [
      "0 愚者 (The Fool)",
      "I 魔術師 (The Magician)",
      "II 女祭司 (The High Priestess)",
      "III 女皇 (The Empress)",
      "IV 皇帝 (The Emperor)",
      "V 教皇 (The Hierophant)",
      "VI 戀人 (The Lovers)",
      "VII 戰車 (The Chariot)",
      "VIII 力量 (Strength)",
      "IX 隱者 (The Hermit)",
      "X 命運之輪 (Wheel of Fortune)",
      "XI 正義 (Justice)",
      "XII 倒吊人 (The Hanged Man)",
      "XIII 死神 (Death)",
      "XIV 節制 (Temperance)",
      "XV 惡魔 (The Devil)",
      "XVI 高塔 (The Tower)",
      "XVII 星星 (The Star)",
      "XVIII 月亮 (The Moon)",
      "XIX 太陽 (The Sun)",
      "XX 審判 (Judgement)",
      "XXI 世界 (The World)"
    ];

    // --- Step 2: 定義小阿爾克那 (56 張) ---
    //  每一組花色 (權杖、聖杯、寶劍、錢幣) 各 14 張：Ace, 2~10, Page, Knight, Queen, King
    const minorArcanaWands = [
      "權杖 Ace (1)",
      "權杖 2",
      "權杖 3",
      "權杖 4",
      "權杖 5",
      "權杖 6",
      "權杖 7",
      "權杖 8",
      "權杖 9",
      "權杖 10",
      "權杖 侍者 (Page)",
      "權杖 騎士 (Knight)",
      "權杖 皇后 (Queen)",
      "權杖 國王 (King)"
    ];
    const minorArcanaCups = [
      "聖杯 Ace (1)",
      "聖杯 2",
      "聖杯 3",
      "聖杯 4",
      "聖杯 5",
      "聖杯 6",
      "聖杯 7",
      "聖杯 8",
      "聖杯 9",
      "聖杯 10",
      "聖杯 侍者 (Page)",
      "聖杯 騎士 (Knight)",
      "聖杯 皇后 (Queen)",
      "聖杯 國王 (King)"
    ];
    const minorArcanaSwords = [
      "寶劍 Ace (1)",
      "寶劍 2",
      "寶劍 3",
      "寶劍 4",
      "寶劍 5",
      "寶劍 6",
      "寶劍 7",
      "寶劍 8",
      "寶劍 9",
      "寶劍 10",
      "寶劍 侍者 (Page)",
      "寶劍 騎士 (Knight)",
      "寶劍 皇后 (Queen)",
      "寶劍 國王 (King)"
    ];
    const minorArcanaPentacles = [
      "錢幣 Ace (1)",
      "錢幣 2",
      "錢幣 3",
      "錢幣 4",
      "錢幣 5",
      "錢幣 6",
      "錢幣 7",
      "錢幣 8",
      "錢幣 9",
      "錢幣 10",
      "錢幣 侍者 (Page)",
      "錢幣 騎士 (Knight)",
      "錢幣 皇后 (Queen)",
      "錢幣 國王 (King)"
    ];

    // 將所有小阿爾克那合併
    const minorArcana = [
      ...minorArcanaWands,
      ...minorArcanaCups,
      ...minorArcanaSwords,
      ...minorArcanaPentacles
    ];

    // 結合成完整 78 張
    const fullTarotDeck = [
      ...majorArcana,
      ...minorArcana
    ];

    /**
     * Fisher-Yates 洗牌演算法
     * 參考：https://en.wikipedia.org/wiki/Fisher–Yates_shuffle
     */
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]]; // swap
      }
      return array;
    }

    /**
     * 抽指定張數的塔羅牌，並隨機決定每張牌是正位或逆位
     * @param {number} count - 要抽的張數
     * @returns {Array} 抽到的牌(包含正逆位資訊)
     */
    function drawCards(count) {
      // 先複製一份完整牌組，以免每次抽完都改變原始陣列
      const deckCopy = [...fullTarotDeck];
      // 洗牌
      shuffle(deckCopy);

      // 抽 count 張牌
      const drawnCards = [];
      for (let i = 0; i < count; i++) {
        const cardName = deckCopy[i];
        // 隨機決定正位或逆位
        const orientation = Math.random() < 0.5 ? "正位" : "逆位";
        drawnCards.push({ name: cardName, orientation });
      }
      return drawnCards;
    }

    /**
     * 顯示抽牌結果到網頁上
     * @param {Array} cards - 包含 {name, orientation} 的陣列
     */
    function displayCards(cards) {
      const resultArea = document.getElementById("resultArea");
      // 先清空舊資料
      resultArea.innerHTML = "";

      if (cards.length === 0) {
        resultArea.innerHTML = "<p>沒有抽到任何牌</p>";
        return;
      }

      // 顯示抽牌資訊
      cards.forEach((card, index) => {
        const div = document.createElement("div");
        div.className = "card";
        div.textContent = `第 ${index + 1} 張：${card.name} - ${card.orientation}`;
        resultArea.appendChild(div);
      });
    }

    // 綁定按鈕事件
    document.getElementById("drawFiveBtn").addEventListener("click", function() {
      const cards = drawCards(5);
      displayCards(cards);
    });

    document.getElementById("drawTwelveBtn").addEventListener("click", function() {
      const cards = drawCards(12);
      displayCards(cards);
    });
  </script>
</body>
</html>
