<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>紫微牌卡抽牌程式</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background-color: #fcf4de; /* 柔和淺黃色背景 */
      text-align: center;
    }
    h1, p {
      margin: 10px 0;
    }
    button {
      font-size: 16px;
      padding: 10px 20px;
      cursor: pointer;
    }
    /* 結果區塊：使用 Flex 讓三張牌橫向並排 */
    #cardResult {
      display: none; /* 預設隱藏，抽牌後顯示 */
      margin: 20px auto;
      max-width: 900px;
      background-color: #fff; /* 內部區塊維持白色 */
      border: 1px solid #ccc;
      padding: 20px;
      text-align: center;
      display: flex;
      justify-content: center;
      gap: 50px; /* 三張牌之間的間距 */
    }
    .card-section {
      flex: 1 1 0; /* 三個區塊平均分配 */
      min-width: 0; 
    }
    .card-info {
      font-size: 16px;
      font-weight: bold;
      color: #333;
      margin: 10px 0;
    }
    footer {
      margin-top: 40px;
      color: #555;
    }
  </style>
</head>
<body>
  <h1>紫微牌卡抽牌</h1>
  <p>點擊下方按鈕抽牌。</p>

  <button onclick="drawCards()">抽牌</button>

  <div id="cardResult">
    <!-- 主星 / 雙星 -->
    <div class="card-section">
      <div class="card-info" id="starInfo"></div>
    </div>
    <!-- 輔星 -->
    <div class="card-section">
      <div class="card-info" id="supportInfo"></div>
    </div>
    <!-- 長生 -->
    <div class="card-section">
      <div class="card-info" id="changShengInfo"></div>
    </div>
  </div>

  <footer>由十號出口提供</footer>

  <script>
    /*************************************************************
     * 牌組資料：
     * 1) 十四主星（正/逆位）
     * 2) 雙星（正/逆位 + 空宮牌）
     * 3) 輔星（正/逆位）
     * 4) 長生（無正逆位）
     *************************************************************/

    // 1) 十四主星牌（有正 / 逆）
    const mainStars = [
      { group: "主星", name: "紫微", orientation: "正位" },
      { group: "主星", name: "紫微", orientation: "逆位" },
      { group: "主星", name: "天機", orientation: "正位" },
      { group: "主星", name: "天機", orientation: "逆位" },
      { group: "主星", name: "太陽", orientation: "正位" },
      { group: "主星", name: "太陽", orientation: "逆位" },
      { group: "主星", name: "天同", orientation: "正位" },
      { group: "主星", name: "天同", orientation: "逆位" },
      { group: "主星", name: "廉貞", orientation: "正位" },
      { group: "主星", name: "廉貞", orientation: "逆位" },
      { group: "主星", name: "武曲", orientation: "正位" },
      { group: "主星", name: "武曲", orientation: "逆位" },
      { group: "主星", name: "破軍", orientation: "正位" },
      { group: "主星", name: "破軍", orientation: "逆位" },
      { group: "主星", name: "天府", orientation: "正位" },
      { group: "主星", name: "天府", orientation: "逆位" },
      { group: "主星", name: "太陰", orientation: "正位" },
      { group: "主星", name: "太陰", orientation: "逆位" },
      { group: "主星", name: "貪狼", orientation: "正位" },
      { group: "主星", name: "貪狼", orientation: "逆位" },
      { group: "主星", name: "巨門", orientation: "正位" },
      { group: "主星", name: "巨門", orientation: "逆位" },
      { group: "主星", name: "天相", orientation: "正位" },
      { group: "主星", name: "天相", orientation: "逆位" },
      { group: "主星", name: "天梁", orientation: "正位" },
      { group: "主星", name: "天梁", orientation: "逆位" },
      { group: "主星", name: "七殺", orientation: "正位" },
      { group: "主星", name: "七殺", orientation: "逆位" }
    ];

    // 2) 雙星牌（有正逆位），含空宮牌
    const doubleStarsRaw = [
      "紫微七殺","紫微破軍","紫微貪狼","紫微天府","紫微天相",
      "天機巨門","天機太陰","天機天梁","天同巨門","天同天梁",
      "太陽太陰","太陽天梁","廉貞七殺","廉貞破軍","廉貞貪狼",
      "廉貞天相","廉貞天府","武曲七殺","武曲破軍","武曲貪狼",
      "武曲天相","武曲天府","太陰天同","巨門太陽","空宮牌"
    ];
    const doubleStars = doubleStarsRaw.flatMap(name => ([
      { group: "雙星", name: name, orientation: "正位" },
      { group: "雙星", name: name, orientation: "逆位" }
    ]));

    // 主星 + 雙星 合併成「starCards」
    const starCards = [...mainStars, ...doubleStars];

    // 3) 輔星牌組（有正逆位）
    const supportStarsRaw = [
      "擎羊","陀羅","鈴星","火星","天刑",
      "空劫（地空、地劫）","祿存","鸞喜（紅鸞、天喜）",
      "化祿","化權","化科","化忌","陰煞",
      "左輔","右弼","文昌","文曲","天魁","天鉞"
    ];
    const supportCards = supportStarsRaw.flatMap(name => ([
      { group: "輔星", name, orientation: "正位" },
      { group: "輔星", name, orientation: "逆位" }
    ]));

    // 4) 十二長生牌組（無正逆位）
    const changShengCardsRaw = [
      "長生","沐浴","冠帶","臨官","帝旺",
      "衰","病","死","墓","絕","胎","養"
    ];
    const changShengCards = changShengCardsRaw.map(name => ({
      group: "長生", name, orientation: "無"
    }));

    /**
     * 從陣列中隨機抽一張
     */
    function pickRandom(array) {
      const randomIndex = Math.floor(Math.random() * array.length);
      return array[randomIndex];
    }

    /**
     * 一次抽牌 (主星/雙星 + 輔星 + 長生)
     */
    function drawCards() {
      // 抽 1 張「主星 / 雙星」
      const starCard = pickRandom(starCards);
      // 抽 1 張「輔星」
      const supportCard = pickRandom(supportCards);
      // 抽 1 張「長生」
      const changShengCard = pickRandom(changShengCards);

      // 組合顯示文字： group - name (orientation)
      const starText = `${starCard.group} - ${starCard.name}` +
        (starCard.orientation === "無" ? "" : ` (${starCard.orientation})`);
      const supportText = `${supportCard.group} - ${supportCard.name}` +
        (supportCard.orientation === "無" ? "" : ` (${supportCard.orientation})`);
      const changShengText = `${changShengCard.group} - ${changShengCard.name}` +
        (changShengCard.orientation === "無" ? "" : ` (${changShengCard.orientation})`);

      // 更新網頁文字
      document.getElementById("starInfo").textContent = starText;
      document.getElementById("supportInfo").textContent = supportText;
      document.getElementById("changShengInfo").textContent = changShengText;

      // 顯示結果區塊
      document.getElementById("cardResult").style.display = "flex";
    }
  </script>
</body>
</html>
